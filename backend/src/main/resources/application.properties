spring.application.name=workoutplanner
server.port=8081

# Include rate limiting configuration
spring.profiles.include=ratelimit

# Disable Spring's JCache auto-configuration (we provide our own CacheManager)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration

# Database Configuration
spring.datasource.url=jdbc:postgresql://localhost:5432/workout_planner
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Hibernate DDL Configuration
# Using 'create' - Hibernate will drop and recreate schema on startup
spring.jpa.hibernate.ddl-auto=create

# Logging Configuration (patterns defined in logback-spring.xml)
logging.file.path=./logs
logging.file.name=application

# Default logging levels
logging.level.root=INFO
logging.level.com.workoutplanner.workoutplanner=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=INFO

# Show SQL queries (set to DEBUG in dev)
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=INFO

# Security Configuration
# Enable HTTPS in production
server.ssl.enabled=${SSL_ENABLED:false}
server.ssl.key-store=${SSL_KEYSTORE:}
server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD:}
server.ssl.key-store-type=${SSL_KEYSTORE_TYPE:PKCS12}

# Auth0 OAuth2 Configuration
# SECURITY: No default values - application will fail fast if Auth0 is not configured
# Set these via environment variables: AUTH0_ISSUER_URI, AUTH0_AUDIENCE, AUTH0_DOMAIN
spring.security.oauth2.resourceserver.jwt.issuer-uri=${AUTH0_ISSUER_URI}
spring.security.oauth2.resourceserver.jwt.audiences=${AUTH0_AUDIENCE}

# Auth0 Custom Properties
auth0.domain=${AUTH0_DOMAIN}
auth0.audience=${AUTH0_AUDIENCE}

# Session Configuration
server.servlet.session.cookie.secure=${COOKIE_SECURE:false}
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict
server.servlet.session.timeout=30m

# CORS Configuration
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:3001}
app.cors.allowed-methods=${CORS_ALLOWED_METHODS:GET,POST,PUT,PATCH,DELETE,OPTIONS}
app.cors.allowed-headers=${CORS_ALLOWED_HEADERS:Content-Type,Authorization,X-Requested-With}
app.cors.allow-credentials=${CORS_ALLOW_CREDENTIALS:true}
app.cors.max-age=${CORS_MAX_AGE:3600}

# Actuator Configuration (for security monitoring)
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.endpoint.metrics.enabled=true
management.endpoint.prometheus.enabled=true
management.prometheus.metrics.export.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.tags.application=workoutplanner

# Springdoc OpenAPI (Swagger) Configuration
# WARNING: Disable in production for security
springdoc.api-docs.enabled=${SWAGGER_ENABLED:true}
springdoc.swagger-ui.enabled=${SWAGGER_ENABLED:true}
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.swagger-ui.filter=true
springdoc.show-actuator=false

