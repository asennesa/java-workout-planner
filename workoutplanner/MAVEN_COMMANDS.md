# Maven Commands Reference

## Maven Lifecycle Explained:

### **Maven Build Lifecycle Phases:**

Maven has three built-in lifecycles: **default**, **clean**, and **site**. The **default** lifecycle is the most important for development.

#### **Default Lifecycle Phases (in order):**

1. **`validate`** - Validates the project is correct and all necessary information is available
2. **`initialize`** - Initialize build state (set up properties, create directories)
3. **`generate-sources`** - Generate any source code for inclusion in compilation
4. **`process-sources`** - Process the source code (filtering, etc.)
5. **`generate-resources`** - Generate resources for inclusion in the package
6. **`process-resources`** - Copy and process the resources into the destination directory
7. **`compile`** - Compile the source code of the project
8. **`process-classes`** - Post-process the generated files from compilation
9. **`generate-test-sources`** - Generate any test source code for inclusion in compilation
10. **`process-test-sources`** - Process the test source code
11. **`generate-test-resources`** - Create resources for testing
12. **`process-test-resources`** - Copy and process the resources into the test destination directory
13. **`test-compile`** - Compile the test source code into the test destination directory
14. **`test`** - Run tests using a suitable unit testing framework
15. **`prepare-package`** - Perform any operations necessary to prepare a package before the actual packaging
16. **`package`** - Take the compiled code and package it in its distributable format (JAR, WAR, etc.)
17. **`pre-integration-test`** - Perform actions required before integration tests are executed
18. **`integration-test`** - Process and deploy the package if necessary into an environment where integration tests can be run
19. **`post-integration-test`** - Perform actions required after integration tests have been executed
20. **`verify`** - Run any checks to verify the package is valid and meets quality criteria
21. **`install`** - Install the package into the local repository
22. **`deploy`** - Copy the final package to the remote repository

#### **What Happens When You Run Each Phase:**

- **`mvn compile`** - Runs phases: validate â†’ initialize â†’ generate-sources â†’ process-sources â†’ generate-resources â†’ process-resources â†’ compile
- **`mvn test`** - Runs all phases up to and including `test`
- **`mvn package`** - Runs all phases up to and including `package`
- **`mvn install`** - Runs all phases up to and including `install`

#### **Clean Lifecycle:**
- **`pre-clean`** - Execute processes needed prior to the actual project cleaning
- **`clean`** - Remove all files generated by the previous build
- **`post-clean`** - Execute processes needed to finalize the project cleaning

### **Practical Example - What Happens During `mvn clean install`:**

```bash
mvn clean install
```

**Step-by-step execution:**

1. **Clean Phase:**
   - `pre-clean` - Prepare for cleaning
   - `clean` - **Deletes `target/` directory** (removes all compiled classes, JARs, etc.)
   - `post-clean` - Finalize cleaning

2. **Default Phase (install):**
   - `validate` - **Checks `pom.xml` is valid**
   - `initialize` - **Sets up build properties, creates directories**
   - `generate-sources` - **Generates any source code** (if configured)
   - `process-sources` - **Processes source files** (filtering, etc.)
   - `generate-resources` - **Generates resources** (if configured)
   - `process-resources` - **Copies resources to `target/classes`**
   - `compile` - **Compiles Java source to `target/classes`**
   - `process-classes` - **Post-processes compiled classes**
   - `generate-test-sources` - **Generates test sources** (if configured)
   - `process-test-sources` - **Processes test sources**
   - `generate-test-resources` - **Generates test resources**
   - `process-test-resources` - **Copies test resources to `target/test-classes`**
   - `test-compile` - **Compiles test classes to `target/test-classes`**
   - `test` - **Runs all unit tests**
   - `prepare-package` - **Prepares for packaging**
   - `package` - **Creates JAR/WAR in `target/`**
   - `pre-integration-test` - **Prepares for integration tests**
   - `integration-test` - **Runs integration tests** (if configured)
   - `post-integration-test` - **Finalizes integration tests**
   - `verify` - **Runs quality checks**
   - `install` - **Installs JAR to local Maven repository** (`~/.m2/repository`)

### **Key Directories Created/Modified:**

- **`target/classes/`** - Compiled main source code
- **`target/test-classes/`** - Compiled test code
- **`target/surefire-reports/`** - Test reports
- **`target/site/jacoco/`** - Code coverage reports (if JaCoCo is configured)
- **`~/.m2/repository/`** - Local Maven repository (where JAR is installed)

## Essential Maven Commands for Daily Development:

### **1. Project Lifecycle Commands:**

```bash
# Clean and compile
mvn clean compile

# Clean, compile, and run tests
mvn clean test

# Clean, compile, test, and package
mvn clean package

# Install to local repository
mvn clean install

# Full lifecycle (clean, compile, test, package, install)
mvn clean install
```

### **2. Testing Commands:**

```bash
# Run all tests
mvn test

# Run specific test class
mvn test -Dtest=WorkoutplannerApplicationTests

# Run tests with specific pattern
mvn test -Dtest=*Test

# Skip tests (when you want to build without testing)
mvn clean package -DskipTests

# Run tests with coverage
mvn clean test jacoco:report
```

### **3. Dependency Management:**

```bash
# Show dependency tree
mvn dependency:tree

# Show dependency conflicts
mvn dependency:tree -Dverbose

# Download sources and javadocs
mvn dependency:sources
mvn dependency:resolve -Dclassifier=javadoc

# Check for outdated dependencies
mvn versions:display-dependency-updates
```

### **4. Code Quality & Analysis:**

```bash
# Run SonarQube analysis
mvn clean test jacoco:report sonar:sonar

# Run SonarQube with authentication
mvn clean test jacoco:report sonar:sonar -Dsonar.login=admin -Dsonar.password=admin

# Generate code coverage report
mvn clean test jacoco:report

# View coverage report
open target/site/jacoco/index.html
```

### **5. Spring Boot Specific:**

```bash
# Run Spring Boot application
mvn spring-boot:run

# Run with specific profile
mvn spring-boot:run -Dspring-boot.run.profiles=dev

# Build executable JAR
mvn clean package

# Run the JAR
java -jar target/workoutplanner-0.0.1-SNAPSHOT.jar
```

### **6. Development Workflow:**

```bash
# Daily development cycle
mvn clean compile test

# Before committing code
mvn clean test jacoco:report

# Full build with quality checks
mvn clean test jacoco:report sonar:sonar

# Quick build (skip tests)
mvn clean package -DskipTests
```

### **7. Troubleshooting Commands:**

```bash
# Force update dependencies
mvn clean install -U

# Skip tests and build
mvn clean package -DskipTests

# Run with debug output
mvn clean test -X

# Check Maven version
mvn -version

# Show effective POM
mvn help:effective-pom
```

### **8. Project Information:**

```bash
# Show project information
mvn help:describe -Dplugin=help

# Show all available goals
mvn help:describe -Dplugin=spring-boot

# Show dependency information
mvn dependency:analyze

# Show plugin information
mvn help:describe -Dplugin=sonar
```

## **Daily Development Workflow:**

### **Morning Setup:**
```bash
# Start Docker services
docker-compose up -d

# Clean build and test
mvn clean test
```

### **During Development:**
```bash
# Quick compile and test
mvn compile test

# Run specific test
mvn test -Dtest=YourTestClass

# Run application
mvn spring-boot:run
```

### **Before Committing:**
```bash
# Full quality check
mvn clean test jacoco:report sonar:sonar
```

### **End of Day:**
```bash
# Stop Docker services
docker-compose down
```

## **Useful Maven Wrapper Commands:**

```bash
# Use Maven wrapper (recommended)
./mvnw clean test
./mvnw spring-boot:run
./mvnw clean package

# On Windows
mvnw.cmd clean test
mvnw.cmd spring-boot:run
```

## **Pro Tips:**

1. **Always use `./mvnw`** instead of `mvn` for consistency
2. **Run `mvn clean`** before important builds
3. **Use `-DskipTests`** only when you're sure tests are passing
4. **Check `mvn dependency:tree`** when you have dependency conflicts
5. **Use `mvn clean install`** to install to local repository
6. **Run SonarQube analysis** before major commits

## **Common Issues & Solutions:**

### **Dependency Issues:**
```bash
# Force update all dependencies
mvn clean install -U

# Check for conflicts
mvn dependency:tree -Dverbose
```

### **Test Issues:**
```bash
# Run tests with more output
mvn test -X

# Skip problematic tests temporarily
mvn clean package -DskipTests
```

### **Build Issues:**
```bash
# Clean everything and rebuild
mvn clean install -U

# Check effective POM
mvn help:effective-pom
```

**These commands will cover 95% of your daily Maven development needs!** ðŸš€
